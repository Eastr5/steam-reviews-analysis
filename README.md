# 🚀 Steam 游戏评论情感分析

本项目是一个完整的机器学习流程，旨在对 Steam 游戏评论进行情感倾向（好评/差评）的分析与预测。项目涵盖了从数据爬取、文本预处理、特征工程到模型训练与评估的全过程。

## 🛠️ 核心功能

- **数据采集**: 内置爬虫 (`src/scraping/steam_crawler.py`)，可以从 Steam 平台根据 App ID 爬取游戏评论。
- **文本预处理**: 对评论文本进行清洗、分词、去除停用词等操作 (`src/preprocessing/text_processor.py`)。
- **特征工程**: 将处理后的文本转换为机器学习模型可以识别的数字特征（如 TF-IDF） (`src/features/feature_builder.py`)。
- **模型训练与评估**: 支持多种分类模型（如逻辑回归、支持向量机、朴素贝叶斯、XGBoost等）的训练、评估和比较 (`src/models/experiment_runner.py`)。
- **自动化流程**: 通过 `main.py` 一键执行从数据处理到模型评估的完整流程，并自动保存结果。

## 🏗️ 项目结构

```bash
.
├── data
│   └── labeled_comments.csv      # 用于训练和评估的已标注数据集
├── results
│   ├── run.log                   # 运行日志
│   ├── 轮次一/                   # 各轮实验结果
│   ├── ...
│   └── 所有轮次比较.xlsx        # 所有实验结果汇总
├── src
│   ├── features
│   │   └── feature_builder.py    # 特征工程模块
│   ├── models
│   │   └── experiment_runner.py  # 模型实验与评估模块
│   ├── preprocessing
│   │   └── text_processor.py     # 文本预处理模块
│   ├── scraping
│   │   └── steam_crawler.py      # 数据爬取模块
│   └── utils
│       └── helpers.py            # 辅助函数
├── main.py                       # 项目主入口
├── requirements.txt              # Python 依赖库
└── README.md                     # 项目说明
```

## ⚙️ 环境配置与安装

### 1. 克隆项目

```bash
git clone <your-repository-url>
cd steam-reviews-analysis
```

### 2. 创建虚拟环境 (推荐)

```bash
python -m venv venv
source venv/bin/activate  # On Windows use `venv\Scripts\activate`
```

### 3. 安装依赖

项目所需的依赖库已在 `requirements.txt` 中列出。通过以下命令安装：

```bash
pip install -r requirements.txt
```

## 🏁 使用方法

直接运行 `main.py` 即可启动完整的分析流程。程序将自动加载数据、进行预处理、构建特征、训练和评估多种模型，并将每轮的结果保存在 `results` 目录下。

```bash
python main.py
```

### 📊 实验结果总结

项目通过多轮实验，比较了不同模型在 Steam 评论情感分类任务上的表现。根据 `results/所有轮次比较.xlsx` 文件中的数据，核心模型的平均性能指标（如准确率、F1分数）总结如下：

| 模型 (Model)              | 平均准确率 (Accuracy) | 平均精确率 (Precision) | 平均召回率 (Recall) | 平均 F1 分数 (F1 Score) |
| ----------------------- | ---------------- | ----------------- | -------------- | ------------------- |
| XGBoost                 | 0.844            | 0.845             | 0.844          | 0.843               |
| Logistic Regression     | 0.841            | 0.848             | 0.841          | 0.841               |
| SVM                     | 0.840            | 0.842             | 0.840          | 0.840               |
| Multinomial Naive Bayes | 0.819            | 0.820             | 0.819          | 0.819               |
| Random Forest           | 0.803            | 0.806             | 0.803          | 0.802               |
| Decision Tree           | 0.741            | 0.742             | 0.741          | 0.741               |

**📑 导出到 Google 表格**
（注：以上数据来源于对所有实验轮次结果的平均值计算，具体每轮次的详细分数请参见 `results` 目录下的 `model_comparison.csv` 文件。）

### 🎯 结论:

从多次实验的平均结果来看，XGBoost 在综合性能（准确率和F1分数）上表现最佳，是此任务场景下的首选模型。逻辑回归在精确率上略有优势，适用于需要强调精准分类的场景。

**下面是主要的几个ROC曲线图**
![](./results/轮次一/roc_curves.png)

![](./results/轮次二/roc_curves.png)
其他图片请前往results文件夹查看

➡️ **[点击此处查看项目其他轮次结果](./results/)**

---
### 25/6/29 对于商业数据驱动新的思考

### 新增功能与指标体系 (通过 `main_new_features.py` 运行)

本项目在原有情感分析的基础上，引入了更丰富的数据驱动业务场景和指标体系，旨在提供更精细的用户画像和商业洞察。

#### 1. 用户画像矩阵新思路：感性分数 VS 理性分数

我们引入了两个核心指标来更全面地理解用户评论的内在价值：

* **感性分数 (Emotional Score)**

  * **定义**: 基于 VADER 情感分析库，生成一个 -1 (极度负面) 到 +1 (极度正面) 之间的复合分数。

  * **科学性**: VADER 库特别适合处理社交媒体文本，包括口语化表达和网络流行语。

  * **驱动场景**: 用于评论情感预测、舆情监控，以及识别用户情绪热点。

* **理性分数 (Rational Score)**

  * **定义**: 通过以下公式计算的复合分数：
    $Rational Score = w1 \* log(评论长度) + w2 \* (平均词长) + w3 \* (数字个数) + w4 \* (特定关键词个数)$
    其中 $w\_i$ 为可配置的权重。

  * **策略**:

    * **“情感宣泄区”社区 (高感性, 低理性)**: 用户是情绪的放大器，喜欢玩梗、跟风。营销策略应侧重于社区活动、强视觉/情感冲击的内容（如表情包、短视频、直播），并可对标“网红菜品”进行爆款营销。

    * **“事实陈述区”社区 (低感性, 高理性)**: 用户是冷静的观察者和问题发现者。沟通方式应透明、真诚、高效（如详细更新日志、BUG追踪列表），内容推送应多为技术拆解、数据报告、开发者Q&A，并可对标关注“卡路里”、“蛋白质含量”的产品特性。

#### 2. 完善的用户评论评价体系

我们对核心用户评论指标进行了归一化处理，并在此基础上定义了两种新的评论价值：

* **归一化指标**:

  * `playtime_norm`: 归一化后的游戏时长 (0: 新玩家, 1: 最资深玩家)。

  * `rational_norm`: 归一化后的理性分数 (0: 纯口水话, 1: 信息密度最高的技术分析)。

  * `emotional_norm`: 归一化后的感性分数 (0: 最负面/无情感, 1: 最正面/最强烈的情感)。

  * `helpful_norm`: 归一化后的社区认同度 (0: 没人点赞, 1: 点赞数最多的评论)。

* **配置A：“核心玩家深度反馈价值” (Core Player Insight Value, CPIV)**

  * **目的**: 精准定位由最资深、最核心玩家所写的、包含大量事实信息和深度思考的反馈。是产品经理和开发团队最需要倾听的声音。

  * **公式**: $CPIV Score = (0.4 \* playtime\_norm) + (0.4 \* rational\_norm) + (0.2 \* helpful\_norm) + (0.0 \* emotional\_norm)$

  * **应用**: 高 CPIV 评论代表了产品改进的“金矿”，应建立专门渠道收集和处理，转化为产品需求或缺陷报告。

* **配置B：“病毒式传播潜力价值” (Viral Potential Value, VPV)**

  * **目的**: 识别最有可能在社交媒体上被大量转发、讨论、点赞的“神评”或“爆款差评”。是市场和运营团队的宝贵素材。

  * **公式**: $VPV Score = (0.5 \* emotional\_norm) + (0.4 \* helpful\_norm) + (0.1 \* playtime\_norm) + (0.0 \* rational\_norm)$

  * **应用**: 高 VPV 评论是市场和运营团队的“利器”，可用于内容营销，制作宣传素材，或作为改进的公开承诺。

#### 3. 负面关键词触发指数

* **定义**: $负面关键词触发指数 = (包含负面关键词的近期评论数) / (近期评论总数)$

  * **负面关键词**: 需要预先定义一个与产品核心体验息息相关的“高危词库”（例如针对游戏的“闪退”、“崩溃”，或针对餐饮的“不新鲜”、“馊”）。

* **重要性**: 总体好评率的下降通常滞后，此指数能敏感捕捉到“问题讨论度”的飙升，避免问题被掩盖。

* **应用**: 设定报警阈值（例如24小时内超过5%），系统自动发送警报。警报触发后，可立即下钻分析关键词提及率，快速定位问题根源。

## 如何运行新功能

1. **安装依赖**: 确保您的 Python 环境中安装了所有必要的库。

   ```
   pip install -r requirements.txt
   
   ```

   （注意：`nltk` 首次运行时可能会自动下载 `vader_lexicon` 词典）

2. **配置关键词和权重**:

   * 打开 `main_new_features.py`。

   * 根据您的业务场景（游戏或餐饮），修改 `rational_keywords` 和 `negative_keywords` 列表。

   * 您也可以根据需要调整 `rational_weights` 中理性分数各组成部分的权重。

3. **运行程序**:

   ```
   python main_new_features.py
   
   ```

4. **查看结果**:

➡️ **[点击此处查看新的商业报告网页](./results/html_report/analysis_dashboard,html)**

---
### 如何使用
...

### ✨ 未来可优化方向:

* **模型优化与调参**: 可进一步调优 XGBoost 和 Logistic Regression 的超参数，以提升模型性能。
* **数据增强**: 增加更多的训练数据或使用数据增强技术来提高模型的泛化能力。

 😊

